<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Formulaire Paiement</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        input, select { padding: 8px; width: 200px; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <h2>Test Formulaire de Paiement</h2>
    
    <div x-data="{
        paymentType: 'single',
        amount: '',
        dailyAmount: '',
        daysCount: ''
    }">
        
        <div class="form-group">
            <label>Type de Paiement:</label><br>
            <input type="radio" x-model="paymentType" value="single" id="single">
            <label for="single">Paiement Simple</label><br>
            <input type="radio" x-model="paymentType" value="multiple" id="multiple">
            <label for="multiple">Paiement Multiple</label>
        </div>

        <div x-show="paymentType === 'single'" class="form-group">
            <label>Montant Simple:</label><br>
            <input type="number" x-model="amount" min="1" placeholder="Ex: 1000">
        </div>

        <div x-show="paymentType === 'multiple'" class="form-group">
            <label>Montant Quotidien:</label><br>
            <input type="number" x-model="dailyAmount" min="1" placeholder="Ex: 500"><br><br>
            <label>Nombre de Jours:</label><br>
            <input type="number" x-model="daysCount" min="1" max="365" placeholder="Ex: 5">
        </div>

        <div class="debug">
            <h3>Debug - Valeurs actuelles:</h3>
            <p><strong>Type:</strong> <span x-text="paymentType"></span></p>
            <p><strong>Amount (simple):</strong> <span x-text="amount || 'vide'"></span></p>
            <p><strong>Daily Amount:</strong> <span x-text="dailyAmount || 'vide'"></span></p>
            <p><strong>Days Count:</strong> <span x-text="daysCount || 'vide'"></span></p>
            <p><strong>Amount calculé:</strong> 
               <span x-text="paymentType === 'single' ? amount : (dailyAmount * daysCount)"></span>
            </p>
        </div>

        <form method="POST" action="#" @submit.prevent="console.log('Formulaire soumis avec:', {
            paymentType: paymentType,
            amount: paymentType === 'single' ? amount : (dailyAmount * daysCount),
            dailyAmount: dailyAmount,
            daysCount: daysCount
        })">
            <input type="hidden" name="amount" 
                   x-bind:value="paymentType === 'single' ? amount : (dailyAmount * daysCount)">
            <input type="hidden" name="daily_amount" x-bind:value="dailyAmount">
            <input type="hidden" name="days_count" x-bind:value="daysCount">
            
            <button type="submit">Tester Soumission</button>
        </form>

    </div>

    <script>
        console.log('Test page chargée. Ouvrez la console pour voir les résultats du test.');
    </script>
</body>
</html>
